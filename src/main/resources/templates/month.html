<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Monthly</title>

    <link rel="stylesheet" href="/webjars/bootstrap/5.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">

    <script src="webjars/jquery/3.6.0/jquery.min.js"></script>
    <script src="webjars/bootstrap/5.2.0/js/bootstrap.min.js"></script>
</head>
<body class="text-bg-dark">

<!--header-->
<header class="py-2 px-4">
    <div>
        <a class="float-md-start nav-link fw-bold py-1 px-0" href="/">Stay Focused</a>
        <nav class="nav nav-masthead justify-content-center float-md-end">
            <a class="nav-link fw-bold py-1 px-0" aria-current="page"
               href="/productivity/week">Weekly productivity</a>
            <a class="nav-link fw-bold py-1 px-0"
               href="/productivity/month">Monthly productivity</a>
        </nav>
    </div>
</header>

<main>
    <!--date picker-->
    <div class="container">
        <form method="get" th:action="@{/productivity/month}" th:object="${months}">
            <div class="form-group row align-items-end">
                <div class="col-md-4 mt-2">
                    <label for="from">Date from</label>
                    <div class="input-group date">
                        <input type="date" class="form-control" id="from" autocomplete="off" th:name="from"/>
                    </div>
                </div>

                <div class="col-md-4 mt-2">
                    <label for="to">Date to</label>
                    <div class="input-group date">
                        <input type="date" class="form-control" id="to" autocomplete="off" th:name="to"/>
                    </div>
                </div>

                <div class="col-md-2">
                    <button class="btn btn-primary" type="submit">Show</button>
                </div>

            </div>
        </form>
    </div>

    <!--            months productivity table-->
    <div class="mt-5 ms-5 me-5 card">
        <div class="card-header text-black h4 text-center">Months productivity</div>
        <div class="card-body">

            <div class="table-responsive">
                <table id="table" class="table table-striped table-sm">
                    <!--                    table headers-->
                    <thead>
                    <tr>
                        <th class="col-sm-3">Task</th>
                        <th class="col-sm-3">Category</th>

                        <div class="col-sm-4">
                            <th th:each="number : ${#numbers.sequence(1, months.count)}"
                                th:text="'Month ' + ${number}"></th>
                            <th>Total</th>
                        </div>

                    </tr>
                    </thead>
                    <!--                    table body-->
                    <tbody>
                    <tr th:each="task : ${months.getTasks()}">
                        <td>
                            <p th:text="${task.getName()}"></p>
                        </td>
                        <td>
                            <p th:text="${task.getCategory()}"></p>
                        </td>
                        <td th:each="time : ${task.getTimeByPeriod()}">
                            <p th:text="${time}"></p>
                        </td>
                        <td>
                            <p th:text="${task.getTotalTime()}"></p>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <!--    month productivity stats-->
    <div class="ms-5 me-5 mt-1 card">
        <div class="card-body">
            <div class="table-responsive text-black">
                <table class="table table-striped table-sm">
                    <thead>
                    <tr>
                        <th class="col-sm-6"></th>

                        <div class="col-sm-4">
                            <th th:each="number : ${#numbers.sequence(1, months.count)}"
                                th:text="'Month ' + ${number}"></th>
                            <th>Total</th>
                        </div>

                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>
                            <p>Productive time</p>
                        </td>
                        <td th:each="stat : ${months.getSummary().getPeriodStats()}">
                            <p th:text="${stat.getProductiveTime()}"></p>
                        </td>
                        <td>
                            <p th:text="${months.getSummary().getTotalStats().getProductiveTime()}"></p>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <p>Total time</p>
                        </td>
                        <td th:each="stat : ${months.getSummary().getPeriodStats()}">
                            <p th:text="${stat.getTotalTime()}"></p>
                        </td>
                        <td>
                            <p th:text="${months.getSummary().getTotalStats().getTotalTime()}"></p>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <p>Percentage</p>
                        </td>
                        <td th:each="stat : ${months.getSummary().getPeriodStats()}">
                            <p th:text="${stat.getPercentage()}"></p>
                        </td>
                        <td>
                            <p th:text="${months.getSummary().getTotalStats().getPercentage()}"></p>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</main>
<!--footer-->
<footer class="py-3 text-center text-white-50">
    <div class="container">
        <p>Created by Michael <a href="https://www.t.me/FLlGHT" class="text-white">"flight"</a> Fedorenko</p>
    </div>
</footer>

<script src="/scripts/productivity.js"></script>

</body>
</html>